name: Daily Learning Log

on:
  schedule:
    # æ¯Žæ—¥æœ9æ™‚ï¼ˆJSTï¼‰ã«å®Ÿè¡Œï¼ˆUTCã§0æ™‚ï¼‰
    - cron: '0 0 * * *'
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  create-daily-log:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Setup timezone
        run: |
          sudo timedatectl set-timezone Asia/Tokyo
          
      - name: Create daily log
        run: |
          # æ—¥ä»˜ã®è¨­å®š
          TODAY=$(date +%Y-%m-%d)
          MONTH=$(date +%Y-%m)
          
          # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
          mkdir -p $MONTH
          
          # ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã®ã¿ä½œæˆ
          if [ ! -f "$MONTH/$TODAY.md" ]; then
            cat > "$MONTH/$TODAY.md" << EOF
          # $TODAY å­¦ç¿’è¨˜éŒ²

          ## ä»Šæ—¥ã®å­¦ç¿’å†…å®¹
          - 

          ## æ–°ã—ãå­¦ã‚“ã ã“ã¨
          -

          ## ã¤ã¾ãšã„ãŸãƒã‚¤ãƒ³ãƒˆãƒ»è§£æ±ºæ–¹æ³•
          - **å•é¡Œ**:
          - **è§£æ±ºç­–**:
          - **å­¦ã³**:

          ## æ˜Žæ—¥ã®å­¦ç¿’äºˆå®š
          -

          ## æ„Ÿæƒ³

          EOF
          fi
          
      - name: Commit and push
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add .
          if git diff --staged --quiet; then
            echo "No changes to commit"
          else
            git commit -m "ðŸ“ Create daily learning log for $(date +%Y-%m-%d)"
            git push
          fi